<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>二代治具密碼查詢</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center">

  <div class="w-11/12 max-w-sm p-4 bg-white shadow rounded-xl space-y-4">
  <h1 class="text-2xl font-bold text-center mb-4">二代治具密碼查詢</h1>
    <!-- 序號 -->
    <div>
      <label for="sn" class="block text-sm font-medium text-gray-700 mb-1">序號 (6 位數)</label>
      <input id="sn" type="text" maxlength="6"
       pattern="\d*" inputmode="numeric"
       oninput="this.value = this.value.replace(/\D/g, '')"
       class="w-full rounded-lg border px-3 py-2 focus:outline-none focus:ring"
       placeholder="輸入 6 位數序號">

    </div>

    <!-- 密碼 -->
    <div>
      <label for="pwd" class="block text-sm font-medium text-gray-700 mb-1">密碼</label>
      <input id="pwd" type="text" readonly
             class="w-full bg-gray-100 rounded-lg border px-3 py-2 text-gray-700">
    </div>

    <!-- 九宮格 -->
    <div>
      <label for="grid" class="block text-sm font-medium text-gray-700 mb-1">九宮格</label>
      <input id="grid" type="text" readonly
             class="w-full bg-gray-100 rounded-lg border px-3 py-2 text-gray-700">
    </div>
  </div>

<script>
  const snInput  = document.getElementById('sn');
  const pwdInput = document.getElementById('pwd');
  const gridInput= document.getElementById('grid');

  snInput.addEventListener('input', () => {
    const txt = snInput.value.trim();
    // 至少需 6 個字元 (僅取前 6 位)
    if (txt.length < 6 || !/^\d{6,}$/.test(txt)) {
      pwdInput.value  = '';
      gridInput.value = '';
      return;
    }

    // 取前 6 位並拆成數字陣列
    const d = txt.slice(0, 6).split('').map(Number);

    const mod10 = (n) => ((n % 10) + 10) % 10;   // 安全取模

    // 密碼: 2+2,1+1,4+4,3+3,6+6,5+5
    const pwd = [
      mod10(d[1] + 2),
      mod10(d[0] + 1),
      mod10(d[3] + 4),
      mod10(d[2] + 3),
      mod10(d[5] + 6),
      mod10(d[4] + 5)
    ].join('');

    // 九宮格: 6+4,2+8,4+6,3+7,5+5,1+9
    const grid = [
      mod10(d[5] + 4),
      mod10(d[1] + 8),
      mod10(d[3] + 6),
      mod10(d[2] + 7),
      mod10(d[4] + 5),
      mod10(d[0] + 9)
    ].join('');

    pwdInput.value  = pwd;
    gridInput.value = grid;
  });
</script>
</body>
</html>
